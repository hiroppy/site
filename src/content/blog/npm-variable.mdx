---
layout: ../../layouts/BlogLayout.astro
title: package.jsonã§å€¤ã‚’å±•é–‹ã™ã‚‹
date: 2018-01-04
description: package.jsonå†…ã§å¤‰æ•°ã‚’å®šç¾©ã—ã€å±•é–‹ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™
image: /images/brands/npm.png
tags: npm
hatenaPath: 2018/01/04/100017
---

import OG from "../../components/OG.astro";

ğŸ ä»Šå¹´åˆã®è¨˜äº‹ã§ã™ ğŸ

ãã†ã„ãˆã°ã“ã‚“ãªæ©Ÿèƒ½ã‚ã£ãŸãªãƒ¼ã£ã¦æ„Ÿã˜ã ã£ãŸã®ã§è¨˜äº‹ã«ã—ã¦ã¿ã¾ã—ãŸã€‚

_æœ¬å½“ã¯ä»Šå¹´æœ€åˆã®è¨˜äº‹ç”¨æ„ã—ã¦ã„ãŸã®ã§ã™ãŒã€ã¾ã çµ‚ã‚ã£ã¦ãªã„ã®ã§å¾Œã»ã©ã€‚ã€‚_

ä»Šå›ã¯ã€ã‚¿ã‚¹ã‚¯ã® start ã¨ build ã«åŒã˜å¤‰æ•°ã‚’ webpack ã¸æ¸¡ã™ãŸã‚ã«å…±é€šåŒ–ã—ãŸãã¦ã€é‡ãŒå¤šããªã£ã¦ããŸã®ã§ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã—ã¾ã—ãŸã€‚

## æ‰‹é †

`$npm_package_`ã« package.json ã«æ›¸ã„ãŸ key ã‚’ã¤ãªã’ã‚‹ã¨ãã‚Œã® value å±•é–‹ã•ã‚Œã¾ã™ã€‚

ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ä¸Šã§ã¯ã€å±•é–‹ã•ã‚Œã¾ã›ã‚“ãŒã€JS ä¸Šã§ã¯å±•é–‹ã•ã‚Œã¾ã™ã€‚

```javascript
// ç¢ºèªç”¨ã®JS
console.log(process.argv[2]);
```

```sh
$ npm run main
> node main.js $npm_package_foo

bar
```

### æ–‡å­—åˆ—ã®å ´åˆ

```json
{
  "foo": "bar",
  "scripts": {
    "main": "node main.js $npm_package_foo"
  }
}
```

### ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆ

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã™ã“ã¨ã¯ã§ããªã„ã®ã§ã€æœ«ç«¯ã¾ã§æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```json
{
  "foo": {
    "bar": 1
  },
  "scripts": {
    "main": "node main.js $npm_package_foo_bar"
  }
}
```

ã‚‚ã—ã€`$npm_package_foo`ã¨æ›¸ã„ãŸå ´åˆã¯ã€`undefined`ã¨ãªã‚Šã¾ã™ã€‚

### é…åˆ—ã®å ´åˆ

é…åˆ—ã‚’æ¸¡ã™ã“ã¨ã¯ã§ããªã„ã®ã§ã€æ·»å­—ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```json
{
  "foo": ["bar"],
  "scripts": {
    "main": "node main.js $npm_package_foo_0"
  }
}
```

ã‚‚ã—ã€`$npm_package_foo`ã¨æ›¸ã„ãŸå ´åˆã¯ã€`undefined`ã¨ãªã‚Šã¾ã™ã€‚

## ã¾ã¨ã‚

- `$npm_package_`ã¨ã„ã†ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ãŒä½¿ãˆã‚‹
- å¿…ãšå€¤ã¯ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“
