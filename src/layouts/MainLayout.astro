---
import Accordion from "../components/Accordion.astro";
import SnsIcon from "../components/SnsIcon.astro";
import Paper from "../components/Paper.astro";
import { PAGE_LINKS } from "../constants";
import Twitter from "../components/icons/Twitter.astro";
import GitHub from "../components/icons/GitHub.astro";
import Facebook from "../components/icons/Facebook.astro";
import LinkedIn from "../components/icons/LinkedIn.astro";
import Rss from "../components/icons/Rss.astro";
import BlogDescription from "../components/BlogDescription.astro";

type Props = {
  title: string;
};

const { title } = Astro.props;

// TODO: slot in slotが現在astroのバグで動かないので、一旦ここでセットさせる
const pathname = Astro.url.pathname;
const Description =
  pathname === "/"
    ? "Hi, I'm Yuta Hiroto! I'm a Node.js and webpack committer and I like development and sleeping 😴"
    : pathname === "/jobs"
    ? "I work in Yuimedi as a VPoE and support Souzoh and Tabelog as a Techinical Advaser 🥸"
    : pathname.startsWith("/media")
    ? "I speak on Monthly Ecosystem of Podcast every month and I write a blog sometimes 😺"
    : pathname.startsWith("/blog")
    ? ""
    : "";
---

<main class="flex gap-4 items-start">
  <div class="sticky w-64 hidden lg:block shrink-0" style={{ top: "96px" }}>
    <div
      class="flex flex-col gap-4"
      style={{ maxHeight: `calc(100vh - 96px - 16px)` }}
    >
      <Paper className="flex-shrink-0">
        <Accordion options={PAGE_LINKS}>
          {
            pathname.startsWith("/blog") ? (
              <BlogDescription slot="description" />
            ) : (
              <span slot="description">{Description}</span>
            )
          }
        </Accordion>
      </Paper>
      <Paper className="flex-shrink-0">
        <div class="flex justify-around items-center p-4">
          <SnsIcon href="https://twitter.com/about_hiroppy" name="Twitter">
            <Twitter />
          </SnsIcon>
          <SnsIcon href="https://github.com/hiroppy" name="GitHub">
            <GitHub />
          </SnsIcon>
          <SnsIcon
            href="https://www.facebook.com/yuta.hiroto0429/"
            name="Facebook"
          >
            <Facebook />
          </SnsIcon>
          <SnsIcon href="https://jp.linkedin.com/in/hiroppy" name="Linkedin">
            <LinkedIn />
          </SnsIcon>
          <SnsIcon href="/blog/rss.xml" name="RSS">
            <Rss />
          </SnsIcon>
        </div>
      </Paper>
      <slot name="optional-content" />
    </div>
  </div>
  <div class="flex-1 w-full overflow-hidden">
    <Paper>
      <div class="p-4 sm:p-4 text-gray-300">
        <h1 class="text-2xl font-semibold mb-8 text-gray-100">{title}</h1>
        <slot />
      </div>
    </Paper>
  </div>
</main>
